{% extends "ClarolineCoreBundle:Workspace:layout.html.twig" %}

{% block section_content %}
    <div class="panel-heading">
        <h1>Évolution de {{ eleve.getFirstName() }} {{ eleve.getLastName() }} </h1>
    </div>
    <div class="panel-body">
        <div class="row">
            <div class="col-xs-9 signature">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        Graphique
                    </div>
                    <div class="panel-body">
                        <div style="text-align: center;">
                            <canvas id="myChart" width="400" height="400"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xs-3 signature">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        Légende
                    </div>
                    <div class="panel-body">
                        <div id="legendDiv"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}


{% block javascripts %}
    {{ parent() }}
    <script
            src='{{ asset('bundles/laurentbulletin/js/chartJs/Chart.js') }}'
            type="text/javascript">
    </script>
    <script>

        // Get context with jQuery - using jQuery's .get() method.
        var ctx = $("#myChart").get(0).getContext("2d");
        // This will get the first returned node in the jQuery collection.
        var options = {
            animation: true,
            scaleBeginAtZero: true,
            datasetFill : false,
            bezierCurve : false,
            legendTemplate :  '<ul>'
                    +'<% for (var i=0; i<datasets.length; i++) { %>'
                    +'<li style=\"color:<%=datasets[i].pointColor%>\">'
                    +'<% if (datasets[i].label) { %><%= datasets[i].label %><% } %>'
                    +'</li>'
                    +'<% } %>'
                    +'</ul>'
        };
        var myLineChart = new Chart(ctx).Line({{ json|raw }}, options);

        document.getElementById("legendDiv").innerHTML = myLineChart.generateLegend();

    </script>
{% endblock %}